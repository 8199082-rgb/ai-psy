<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>å½’å› ç†è®ºäº’åŠ¨æ¼”ç¤ºï½œå°æ˜ä¸æ•°å­¦å¤©èµ‹</title>
<style>
  :root{
    --bg:#f7f9fc;
    --card:#ffffff;
    --text:#1f2937;
    --muted:#6b7280;
    --accent:#2563eb;
    --good:#16a34a;
    --warn:#b45309;
    --bad:#dc2626;
    --shadow:0 10px 25px rgba(0,0,0,.07);
    --radius:18px;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Inter,"PingFang SC","Hiragino Sans GB","Microsoft YaHei",sans-serif;
    color:var(--text);
    background:linear-gradient(180deg,#f0f5ff, var(--bg));
  }
  header{
    padding:28px 16px 12px;
    text-align:center;
  }
  header h1{margin:0 0 6px;font-size:22px;}
  header p{margin:0;color:var(--muted);font-size:14px}
  .container{max-width:1100px;margin:0 auto;padding:16px;display:grid;gap:18px;grid-template-columns:1.1fr .9fr}
  @media (max-width:980px){.container{grid-template-columns:1fr}}

  .card{
    background:var(--card);
    border-radius:var(--radius);
    box-shadow:var(--shadow);
    padding:18px;
  }
  .scene{
    display:grid;grid-template-columns:320px 1fr;gap:16px;align-items:stretch;
  }
  @media (max-width:820px){.scene{grid-template-columns:1fr}}

  .avatarWrap{
    position:relative;
    background:linear-gradient(180deg,#fff, #f5f7ff);
    border-radius:var(--radius);
    min-height:260px;
    display:flex;align-items:center;justify-content:center;
    overflow:hidden;border:1px solid #eef2ff;
  }
  .avatar{
    width:160px;height:160px;border-radius:50%;
    background:#e0e7ff;display:flex;align-items:center;justify-content:center;
    font-size:78px;transition:.25s transform ease,.25s filter ease,.25s opacity ease;
    box-shadow:inset 0 0 0 8px #c7d2fe;
  }
  .avatar.sad{transform:translateY(6px) rotate(6deg);filter:grayscale(.6);opacity:.9}
  .avatar.hope{transform:translateY(-2px) scale(1.02)}
  .avatar.neutral{transform:none;filter:none;opacity:1}

  .bubble{
    position:absolute;top:14px;left:14px;max-width:82%;
    background:#ffffff;border:1px solid #e5e7eb;border-radius:18px;
    padding:10px 12px;font-size:14px;line-height:1.4;box-shadow:var(--shadow)
  }
  .bubble::after{
    content:"";position:absolute;left:22px;top:100%;
    border:10px solid transparent;border-top-color:#e5e7eb;transform:translateY(-1px)
  }
  .bubble::before{
    content:"";position:absolute;left:22px;top:100%;
    border:9px solid transparent;border-top-color:#ffffff;transform:translateY(-2px)
  }

  .panel h3{margin:0 0 8px}
  .meta{color:var(--muted);font-size:13px;margin:6px 0 0}

  /* Controls */
  .controls .row{margin-bottom:12px}
  .label{display:flex;justify-content:space-between;font-size:13px;color:var(--muted);margin:2px 2px 6px}
  .toggle{
    display:grid;grid-template-columns:auto 1fr auto;gap:10px;align-items:center
  }
  input[type="range"]{
    -webkit-appearance:none;appearance:none;width:100%;height:28px;background:transparent;outline:none;cursor:pointer;
  }
  input[type="range"]::-webkit-slider-runnable-track{
    height:12px;background:linear-gradient(90deg,#dbeafe,#bfdbfe);border-radius:999px;border:1px solid #c7d2fe;
  }
  input[type="range"]::-moz-range-track{
    height:12px;background:linear-gradient(90deg,#dbeafe,#bfdbfe);border-radius:999px;border:1px solid #c7d2fe;
  }
  input[type="range"]::-webkit-slider-thumb{
    -webkit-appearance:none;appearance:none;margin-top:-8px;width:28px;height:28px;border-radius:50%;
    background:var(--card);border:2px solid var(--accent);box-shadow:0 4px 10px rgba(37,99,235,.25)
  }
  input[type="range"]::-moz-range-thumb{
    width:28px;height:28px;border-radius:50%;background:var(--card);border:2px solid var(--accent)
  }
  .chips{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px}
  .chip{
    background:#eef2ff;color:#1e3a8a;border:1px solid #c7d2fe;border-radius:999px;padding:4px 10px;font-size:12px
  }

  /* Buttons */
  .btn{border:none;border-radius:12px;padding:10px 14px;background:var(--accent);color:#fff;cursor:pointer}
  .btn:active{transform:translateY(1px)}
  .btn.secondary{background:#e5e7eb;color:#111827}

  /* Rubric / scoring */
  .rubric p{margin:.2rem 0}
  .scoreBox{
    border-radius:12px;border:1px dashed #cbd5e1;background:#f8fafc;padding:12px;margin-top:10px;font-size:14px
  }
  .score{font-weight:700}
  .score.good{color:var(--good)} .score.mid{color:var(--warn)} .score.bad{color:var(--bad)}

  textarea{
    width:100%;min-height:120px;padding:12px;border-radius:12px;border:1px solid #e5e7eb;outline:none;
    font-size:14px;resize:vertical;background:#fff
  }
  .footer{
    text-align:center;color:var(--muted);font-size:12px;padding:10px 0 26px
  }
</style>
</head>
<body>
  <header>
    <h1>äº’åŠ¨åé¦ˆ Â· éš¾ç‚¹æ”»å…‹ï¼šå½’å› ç†è®ºå¯è§†åŒ–</h1>
    <p>ä»»åŠ¡ï¼šæ¡ˆä¾‹â€œå°æ˜è®¤ä¸ºè‡ªå·±æ²¡æ•°å­¦å¤©èµ‹â€ã€‚æ‹–åŠ¨æ»‘å—â†’è§‚å¯Ÿæƒ…ç»ªä¸ç†è®ºè§£é‡Šçš„å˜åŒ–â†’å®Œæˆç®€ç­”å¹¶è‡ªåŠ¨è¯„åˆ†ã€‚</p>
  </header>

  <main class="container">
    <!-- å·¦ï¼šäº’åŠ¨åŒº -->
    <section class="card">
      <div class="controls">
        <div class="row">
          <div class="label"><span>å½’å› ç»´åº¦</span><span>ï¼ˆå†…éƒ¨ / å¤–éƒ¨ï¼‰</span></div>
          <div class="toggle" aria-label="å½’å› ç»´åº¦ï¼ˆå†…éƒ¨/å¤–éƒ¨ï¼‰">
            <span>å†…éƒ¨</span>
            <input id="locus" type="range" min="0" max="1" value="0" step="1" />
            <span>å¤–éƒ¨</span>
          </div>
        </div>
        <div class="row">
          <div class="label"><span>ç¨³å®šæ€§</span><span>ï¼ˆç¨³å®š / ä¸ç¨³å®šï¼‰</span></div>
          <div class="toggle" aria-label="ç¨³å®šæ€§ï¼ˆç¨³å®š/ä¸ç¨³å®šï¼‰">
            <span>ç¨³å®š</span>
            <input id="stability" type="range" min="0" max="1" value="0" step="1" />
            <span>ä¸ç¨³å®š</span>
          </div>
        </div>
        <div class="row">
          <div class="label"><span>å¯æ§æ€§</span><span>ï¼ˆå¯æ§ / ä¸å¯æ§ï¼‰</span></div>
          <div class="toggle" aria-label="å¯æ§æ€§ï¼ˆå¯æ§/ä¸å¯æ§ï¼‰">
            <span>å¯æ§</span>
            <input id="control" type="range" min="0" max="1" value="1" step="1" />
            <span>ä¸å¯æ§</span>
          </div>
        </div>
        <div class="chips" id="chips"></div>
        <div style="display:flex;gap:10px;margin-top:10px">
          <button class="btn" id="presetAbility">ä¸€é”®ç¤ºä¾‹ï¼šèƒ½åŠ›å½’å› ï¼ˆå†…éƒ¨Â·ç¨³å®šÂ·ä¸å¯æ§ï¼‰</button>
          <button class="btn secondary" id="reset">é‡ç½®</button>
        </div>
      </div>

      <div class="scene" style="margin-top:16px">
        <div class="avatarWrap">
          <div class="bubble" id="bubble">æˆ‘å¤ªç¬¨äº†ï¼Œå†æ€ä¹ˆå­¦ä¹Ÿæ²¡ç”¨ã€‚</div>
          <div class="avatar sad" id="avatar" aria-label="å°æ˜è¡¨æƒ…">ğŸ™</div>
        </div>
        <div class="panel">
          <h3>ç†è®ºè§£é‡Š</h3>
          <p id="theory">
            è¯¥è®¾ç½®ä¸º<strong>å†…éƒ¨Â·ç¨³å®šÂ·ä¸å¯æ§</strong>ï¼Œå€¾å‘äºå°†å¤±è´¥å½’å› ä¸ºã€Œèƒ½åŠ›ä¸è¶³ã€ã€‚
            è¿™ç§å½’å› ä¼šé™ä½åŠªåŠ›é¢„æœŸå¹¶å®¹æ˜“å¼•å‘<strong>ä¹ å¾—æ€§æ— åŠ©</strong>ä¸æ”¾å¼ƒè¡Œä¸ºã€‚
          </p>
          <p class="meta">
            å½“å‰å½’å› æ ‡ç­¾ï¼š<span id="tagL"></span> ï½œ <span id="tagS"></span> ï½œ <span id="tagC"></span>
          </p>
          <p class="meta">å¯èƒ½å¯¹åº”çš„åŸå› ï¼š<span id="cause">èƒ½åŠ›ï¼ˆAbilityï¼‰</span></p>
        </div>
      </div>
    </section>

    <!-- å³ï¼šæ•™å­¦è¯„ä¼° -->
    <aside class="card">
      <h3 style="margin-top:0">æ•™å­¦è¯„ä¼°ï¼ˆç®€ç­”è‡ªåŠ¨è¯„åˆ†ï¼‰</h3>
      <p class="meta">è¦æ±‚ï¼šç»“åˆå½“å‰æ»‘å—è®¾ç½®ï¼Œå†™å‡ºå½’å› åˆ¤æ–­ä¸å¯¹åŠ¨æœºçš„å½±å“ï¼ˆ100å­—å·¦å³ï¼‰ã€‚</p>
      <textarea id="answer" placeholder="ç¤ºä¾‹ï¼šè¿™æ˜¯å¤–éƒ¨ä¸”ä¸ç¨³å®šçš„å½’å› ï¼Œæ›´åƒä¾¥å¹¸å¿ƒç†ï¼ˆè¿æ°”ï¼‰ï¼ŒæˆåŠŸå½’å› ä¸ºè¿æ°”å¯èƒ½ä¸ä¼šæå‡è‡ªæˆ‘æ•ˆèƒ½ï¼›å¤±è´¥è‹¥å½’å› ä¸ºèƒ½åŠ›ä¸è¶³ï¼Œå¯èƒ½é™ä½åŠ¨æœºç”šè‡³äº§ç”Ÿæ— åŠ©æ„Ÿã€‚"></textarea>
      <div style="display:flex;gap:10px;margin-top:10px">
        <button class="btn" id="scoreBtn">è‡ªåŠ¨è¯„åˆ†</button>
        <button class="btn secondary" id="clearAns">æ¸…ç©º</button>
      </div>
      <div class="scoreBox" id="scoreBox" aria-live="polite">
        <div><strong>å…³é”®æ£€ç´¢è¯</strong>ï¼ˆå‘½ä¸­å³åŠ åˆ†ï¼‰ï¼š</div>
        <div class="chips" style="margin-top:6px">
          <span class="chip">å¤–éƒ¨ / å¤–åœ¨</span>
          <span class="chip">ä¸ç¨³å®š</span>
          <span class="chip">ä¾¥å¹¸å¿ƒç† / è¿æ°”</span>
          <span class="chip">é™ä½åŠ¨æœº / æ— åŠ©</span>
        </div>
        <div id="scoreText" style="margin-top:8px">
          å½“å‰å¾—åˆ†ï¼š<span class="score bad" id="score">0 / 3</span>
          <div id="scoreDetail" class="meta" style="margin-top:6px">è¯·ä½œç­”åç‚¹å‡»â€œè‡ªåŠ¨è¯„åˆ†â€ã€‚</div>
        </div>
      </div>

      <div class="rubric" style="margin-top:12px">
        <p><strong>è¯„åˆ†è§„åˆ™ï¼ˆåˆæ­¥ï¼‰ï¼š</strong></p>
        <p>Â· æåŠâ€œå¤–éƒ¨/å¤–åœ¨â€ä¸”â€œ ä¸ç¨³å®š â€ â†’ +1</p>
        <p>Â· æåŠâ€œä¾¥å¹¸å¿ƒç† / è¿æ°”â€ â†’ +1</p>
        <p>Â· æåŠâ€œé™ä½åŠ¨æœº / æ— åŠ©ï¼ˆä¹ å¾—æ€§æ— åŠ©ç­‰ï¼‰â€ â†’ +1</p>
      </div>
    </aside>
  </main>

  <div class="footer">Â© å½’å› ç†è®ºäº¤äº’å°ç»ƒä¹  Â· ä»…ç”¨äºæ•™å­¦ç¤ºèŒƒ</div>

<script>
(function(){
  const $ = (id)=>document.getElementById(id);

  const sliders = { locus:$("locus"), stability:$("stability"), control:$("control") };
  const tagL=$("tagL"), tagS=$("tagS"), tagC=$("tagC");
  const chips=$("chips"), bubble=$("bubble"), avatar=$("avatar"), theory=$("theory");
  const causeEl=document.querySelector(".panel .meta span#cause") || document.querySelectorAll(".panel .meta")[1]?.querySelector("span");

  const labels = {
    locus: ["å†…éƒ¨","å¤–éƒ¨"],
    stability: ["ç¨³å®š","ä¸ç¨³å®š"],
    control: ["å¯æ§","ä¸å¯æ§"]
  };

  const presets = {
    "å†…éƒ¨|ç¨³å®š|ä¸å¯æ§": {
      emoji:"ğŸ™", mood:"sad",
      bubble:"æˆ‘å¤ªç¬¨äº†ï¼Œå†æ€ä¹ˆå­¦ä¹Ÿæ²¡ç”¨ã€‚",
      cause:"èƒ½åŠ›ï¼ˆAbilityï¼‰",
      theory:"è¯¥è®¾ç½®ä¸º<strong>å†…éƒ¨Â·ç¨³å®šÂ·ä¸å¯æ§</strong>â€”â€”å…¸å‹çš„ã€Œèƒ½åŠ›ã€å½’å› ã€‚ç¨³å®šä¸”ä¸å¯æ§ä¼šé™ä½å¯¹åŠªåŠ›çš„æ•ˆç”¨é¢„æœŸï¼Œæ˜“å¼•å‘<strong>ä¹ å¾—æ€§æ— åŠ©</strong>ã€é™ä½æŒä¹…åŠ¨æœºã€‚"
    },
    "å†…éƒ¨|ä¸ç¨³å®š|å¯æ§": {
      emoji:"ğŸ™‚", mood:"hope",
      bubble:"å¦‚æœæˆ‘å¤šç»ƒä¹ ã€æ¢ç­–ç•¥ï¼Œä¸‹æ¬¡ä¼šæ›´å¥½ï¼",
      cause:"åŠªåŠ›ï¼ˆEffortï¼‰",
      theory:"è¿™æ˜¯<strong>å†…éƒ¨Â·ä¸ç¨³å®šÂ·å¯æ§</strong>çš„ã€ŒåŠªåŠ›ã€å½’å› ã€‚å¼ºè°ƒå¯æ”¹è¿›ä¸å¯æ§æ€§ï¼Œé€šå¸¸æå‡è‡ªæˆ‘æ•ˆèƒ½ä¸åç»­åŠ¨æœºã€‚"
    },
    "å¤–éƒ¨|ç¨³å®š|ä¸å¯æ§": {
      emoji:"ğŸ˜•", mood:"neutral",
      bubble:"è¿™æ¬¡é¢˜ç›®éš¾åº¦è¶…çº²äº†â€¦â€¦",
      cause:"ä»»åŠ¡éš¾åº¦ï¼ˆTask Difficultyï¼‰",
      theory:"è¿™æ˜¯<strong>å¤–éƒ¨Â·ç¨³å®šÂ·ä¸å¯æ§</strong>ã€‚çŸ­æœŸèƒ½ä¿æŠ¤è‡ªæˆ‘ä»·å€¼ï¼Œä½†è‹¥é•¿æœŸç¨³å®šå¤–éƒ¨éšœç¢å­˜åœ¨ï¼Œä¼šé™ä½æœŸæœ›ä¸åšæŒã€‚"
    },
    "å¤–éƒ¨|ä¸ç¨³å®š|ä¸å¯æ§": {
      emoji:"ğŸ˜Œ", mood:"neutral",
      bubble:"ä»Šå¤©æœ‰ç‚¹èƒŒï¼Œè¿æ°”ä¸å¥½ã€‚",
      cause:"è¿æ°”ï¼ˆLuckï¼‰",
      theory:"è¿™æ˜¯<strong>å¤–éƒ¨Â·ä¸ç¨³å®šÂ·ä¸å¯æ§</strong>çš„ã€Œè¿æ°”ã€å½’å› ã€‚å¯ç¼“å†²æƒ…ç»ªï¼Œä½†å¯¹èƒ½åŠ›æ„Ÿä¸é•¿æœŸåŠ¨æœºæå‡æœ‰é™ã€‚"
    },
    // å…¶ä½™ 4 ç§ç»„åˆï¼šç»™å‡ºåˆç†çš„å¼•å¯¼æ€§è§£é‡Š
    "å†…éƒ¨|ç¨³å®š|å¯æ§": {
      emoji:"ğŸ™‚", mood:"neutral",
      bubble:"æˆ‘ä¸€ç›´ç”¨åŒä¸€ç§æ–¹æ³•ï¼Œå¯èƒ½è¯¥ç³»ç»Ÿåœ°è°ƒæ•´ä¹ æƒ¯äº†ã€‚",
      cause:"å›ºå®šä¹ æƒ¯ / ç­–ç•¥é€‰æ‹©",
      theory:"<strong>å†…éƒ¨Â·ç¨³å®šÂ·å¯æ§</strong>ã€‚åå‘ç¨³å®šçš„å­¦ä¹ ä¹ æƒ¯æˆ–ç­–ç•¥ï¼Œä½†å¯é€šè¿‡è®¡åˆ’ä¸è®­ç»ƒæ”¹å˜ï¼Œå¼ºè°ƒå¯æ§å¯é¿å…æ— åŠ©ã€‚"
    },
    "å†…éƒ¨|ä¸ç¨³å®š|ä¸å¯æ§": {
      emoji:"ğŸ˜•", mood:"neutral",
      bubble:"æœ€è¿‘èº«ä½“/æƒ…ç»ªä¸å¤ªåœ¨çº¿ï¼ŒçŠ¶æ€èµ·ä¼å¤§ã€‚",
      cause:"çŠ¶æ€æ³¢åŠ¨ï¼ˆæƒ…ç»ª/å¥åº·ï¼‰",
      theory:"<strong>å†…éƒ¨Â·ä¸ç¨³å®šÂ·ä¸å¯æ§</strong>ã€‚çŸ­æœŸå—ç”Ÿç†æˆ–æƒ…ç»ªå½±å“ï¼Œæé†’å…³æ³¨èº«å¿ƒä¸èŠ‚å¥ï¼Œé¿å…å°†çŸ­æœŸæ³¢åŠ¨è§£é‡Šä¸ºèƒ½åŠ›ä¸è¶³ã€‚"
    },
    "å¤–éƒ¨|ç¨³å®š|å¯æ§": {
      emoji:"ğŸ™‚", mood:"hope",
      bubble:"ä¹Ÿè®¸æˆ‘å¯ä»¥æ‰¾è¾…å¯¼ã€æ¢æ•™ææˆ–äº‰å–æ›´å¤šç»ƒä¹ èµ„æºï¼",
      cause:"èµ„æºä¸æ”¯æŒï¼ˆå¯äº‰å–ï¼‰",
      theory:"<strong>å¤–éƒ¨Â·ç¨³å®šÂ·å¯æ§</strong>ã€‚å¤–éƒ¨æ¡ä»¶ç›¸å¯¹ç¨³å®šï¼Œä½†å¯é€šè¿‡å¯»æ±‚æ”¯æŒä¸èµ„æºé…ç½®æ¥æ”¹å˜å¤„å¢ƒã€‚"
    },
    "å¤–éƒ¨|ä¸ç¨³å®š|å¯æ§": {
      emoji:"ğŸ™‚", mood:"hope",
      bubble:"æ—¶é—´ç®¡ç†æ²¡å®‰æ’å¥½ï¼Œä¸‹æ¬¡æŒ‰è®¡åˆ’æ¥å°±è¡Œã€‚",
      cause:"æƒ…å¢ƒä¸ç®¡ç†ï¼ˆå¯æ”¹è¿›ï¼‰",
      theory:"<strong>å¤–éƒ¨Â·ä¸ç¨³å®šÂ·å¯æ§</strong>ã€‚ä¸´æ—¶æ€§å¤–å› ï¼Œå¯é€šè¿‡ç­–ç•¥ä¸æ—¶é—´ç®¡ç†æ”¹å–„ï¼Œåˆ©äºæ¢å¤æ§åˆ¶æ„Ÿã€‚"
    }
  };

  function readState(){
    const L = labels.locus[+sliders.locus.value];
    const S = labels.stability[+sliders.stability.value];
    const C = labels.control[+sliders.control.value];
    return {L,S,C,key:`${L}|${S}|${C}`};
  }

  function renderChips({L,S,C}){
    chips.innerHTML = `
      <span class="chip">å½’å› ç»´åº¦ï¼š${L}</span>
      <span class="chip">ç¨³å®šæ€§ï¼š${S}</span>
      <span class="chip">å¯æ§æ€§ï¼š${C}</span>`;
  }

  function setAvatar(emoji,mood){
    avatar.textContent = emoji;
    avatar.classList.remove("sad","hope","neutral");
    avatar.classList.add(mood||"neutral");
  }

  function update(){
    const st = readState();
    tagL.textContent = st.L; tagS.textContent = st.S; tagC.textContent = st.C;
    renderChips(st);

    const preset = presets[st.key] || null;
    if(preset){
      bubble.textContent = preset.bubble;
      theory.innerHTML = preset.theory;
      if(causeEl) causeEl.textContent = preset.cause;
      setAvatar(preset.emoji, preset.mood);
    }else{
      bubble.textContent = "ï¼ˆæ€è€ƒä¸­â€¦â€¦ï¼‰";
      theory.innerHTML = `å½“å‰è®¾ç½®ï¼š<strong>${st.L}Â·${st.S}Â·${st.C}</strong>ã€‚è¯·ç»“åˆä¸‰ç»´åº¦åˆ†æå…¶å¯¹æƒ…ç»ªã€æœŸæœ›ä¸åŠ¨æœºçš„å½±å“ã€‚`;
      if(causeEl) causeEl.textContent = "â€”";
      setAvatar("ğŸ™‚","neutral");
    }
  }

  Object.values(sliders).forEach(el=>el.addEventListener("input",update));
  document.getElementById("presetAbility").addEventListener("click", ()=>{
    sliders.locus.value=0;      // å†…éƒ¨
    sliders.stability.value=0;  // ç¨³å®š
    sliders.control.value=1;    // ä¸å¯æ§
    update();
  });
  document.getElementById("reset").addEventListener("click", ()=>{
    sliders.locus.value=0;
    sliders.stability.value=0;
    sliders.control.value=1;
    update();
  });

  // ---- æ•™å­¦è¯„ä¼°ï¼šå…³é”®è¯è‡ªåŠ¨è¯„åˆ† ----
  const scoreSpan=document.getElementById("score"), scoreDetail=document.getElementById("scoreDetail");
  function scoreAnswer(){
    const txt = (document.getElementById("answer").value||"").replace(/\s+/g,"").toLowerCase();

    // ç»„1ï¼šå¤–éƒ¨ & ä¸ç¨³å®šï¼ˆè‡³å°‘å‘½ä¸­ä»»ä¸€å…³é”®è¯åˆ†åˆ«åŠ åŠåˆ†ï¼Œåˆè®¡æ»¡1åˆ†ï¼‰
    const exts = /(å¤–éƒ¨|å¤–åœ¨|æƒ…å¢ƒ|ç¯å¢ƒ|é¢˜ç›®éš¾åº¦|è€å¸ˆ|è€ƒè¯•å¤ªéš¾|èµ„æº|å®¶åº­)/;
    const unstable = /(ä¸ç¨³å®š|ä¸´æ—¶|å¶å‘|æš‚æ—¶|æ³¢åŠ¨)/;

    // ç»„2ï¼šä¾¥å¹¸å¿ƒç† / è¿æ°”
    const luck = /(ä¾¥å¹¸|è¿æ°”|èµ°è¿|luck)/;

    // ç»„3ï¼šé™ä½åŠ¨æœº / æ— åŠ©
    const demot = /(é™ä½åŠ¨æœº|åŠ¨æœºä¸‹é™|å¤±å»åŠ¨åŠ›|ä¸æƒ³å­¦äº†|æ— åŠ©|ä¹ å¾—æ€§æ— åŠ©|æ”¾å¼ƒ)/;

    let s=0, hits=[];
    let s1 = 0;
    if(exts.test(txt)){ s1+=0.5; hits.push("å‘½ä¸­ï¼šå¤–éƒ¨/å¤–åœ¨"); }
    if(unstable.test(txt)){ s1+=0.5; hits.push("å‘½ä¸­ï¼šä¸ç¨³å®š"); }
    s += Math.min(1, s1);

    if(luck.test(txt)){ s+=1; hits.push("å‘½ä¸­ï¼šä¾¥å¹¸/è¿æ°”"); }
    if(demot.test(txt)){ s+=1; hits.push("å‘½ä¸­ï¼šé™ä½åŠ¨æœº/æ— åŠ©"); }

    s = Math.min(3, s);
    scoreSpan.textContent = `${s} / 3`;
    scoreSpan.className = "score " + (s>=2.5?"good": s>=1.5?"mid":"bad");

    const miss = [];
    if(s1<1){ if(!exts.test(txt)) miss.push("å¤–éƒ¨/å¤–åœ¨"); if(!unstable.test(txt)) miss.push("ä¸ç¨³å®š"); }
    if(!luck.test(txt)) miss.push("ä¾¥å¹¸/è¿æ°”");
    if(!demot.test(txt)) miss.push("é™ä½åŠ¨æœº/æ— åŠ©");

    scoreDetail.innerHTML = (hits.length? ("âœ… " + hits.join("ï¼Œ")) : "å°šæœªå‘½ä¸­ç‰¹å®šå…³é”®è¯ã€‚")
      + (miss.length? ("<br>ğŸ‘‰ å»ºè®®è¡¥å……ï¼š<em>"+miss.join("ï¼Œ")+"</em>ã€‚"):"")
      + "<br><span class='meta'>æç¤ºï¼šæœ¬è¯„åˆ†ä»…ä½œå¿«é€Ÿè¯Šæ–­ï¼Œæ•™å¸ˆåº”ç»“åˆå†…å®¹å‡†ç¡®æ€§ä¸é€»è¾‘æ€§ç»¼åˆè¯„ä»·ã€‚</span>";
  }

  document.getElementById("scoreBtn").addEventListener("click", scoreAnswer);
  document.getElementById("clearAns").addEventListener("click", ()=>{
    document.getElementById("answer").value="";
    scoreSpan.textContent="0 / 3";
    scoreSpan.className="score bad";
    scoreDetail.textContent="è¯·ä½œç­”åç‚¹å‡»â€œè‡ªåŠ¨è¯„åˆ†â€ã€‚";
  });

  // åˆå§‹å‘ˆç°ï¼šèƒ½åŠ›å½’å› 
  update();
})();
</script>
</body>
</html>
